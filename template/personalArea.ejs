<link rel="stylesheet" href="css/stylePersonalArea.css">
<% layout('layout/page') -%>
<% block('title') -%>

  <!-- LEFT START -->
    <div class="main-and-sidebar-wrapper-left">
        <section class="main-left">
            <h2>Welcome, <%=email%>!</h2>

<% if (accessLevel == "Trainer" && email != "admin@mail.ru") { %>
<table>
  <caption>My students</caption>
  <thead>
    <tr>
      <th scope="col">№</th>
      <th scope="col">Name</th>
      <th scope="col">Gender</th>
      <th scope="col">Age</th>
    </tr>
  </thead>
   <% for(var i=0; i<links.length; i++) { %>
  <tbody>
    <tr>
      <td aria-label="№"><%=[i+1]%></td>
      <td aria-label="Name"><a href="<%=links[i]%>"><%=usernames[i]%></a></td>
      <td aria-label="Gender"><%=genders[i]%></td>
      <td aria-label="Age"><%=ages[i]%></td>
    </tr>
  </tbody>
    <% } %>
</table>
<% } %>

<% if (email == "admin@mail.ru") { %>
  <h3>Select where to upload the image</h3>
  <SELECT name="updateImage" type="text" class="select-updateImage" id="input-updateImage" required>
<OPTION>1</OPTION>
<OPTION>2</OPTION>
<OPTION>3</OPTION>
<OPTION>4</OPTION>
<OPTION>5</OPTION>
<OPTION>6</OPTION>
<OPTION>7</OPTION>
</SELECT>
  <input type="file" class="upload" id="upload_file" size="50" name="icon" onchange="loadFile(this);">
  <div id="myProgress">
    <div id="myBar"></div>
  </div>

  <table>
    <caption>Trainers</caption>
    <thead>
      <tr>
        <th scope="col">№</th>
        <th scope="col">Email</th>
        <th scope="col">Count Students</th>
      </tr>
    </thead>
     <% for(var i=0; i<linksTrainers.length; i++) { %>
    <tbody>
      <tr>
        <td aria-label="№"><%=[i+1]%></td>
        <td aria-label="Email"><a href="<%=linksTrainers[i]%>"><%=emailTrainers[i]%></a></td>
        <td aria-label="Count Students"><%=countStudents[i]%></td>
      </tr>
    </tbody>
      <% } %>
  </table>



  <% } %>
        </section>
    </div>
  <!-- LEFT END -->

<!-- CENTER START -->
    <div class="main-and-sidebar-wrapper">
        <section class="main">

        </section>
    </div>
<!-- CENTER END -->

  <!-- RIGHT START -->
    <div class="main-and-sidebar-wrapper-right">
        <section class="main-right">
            <h2 style="text-align: center">Settings</h2>

            <form class="form-addNewUser" name="cabinet_addNewUser">
            <h2>Login</h2>
            <div class="settings_entrance_input" id="">
              <img src="" class="img-responsive" id="imageEntranceLoginInput_1">
              <img src="" class="img-responsive" id="imageEntranceLoginInput_2">
              <img src="" class="img-responsive" id="imageEntranceLoginInput_3">
              <img src="" class="img-responsive" id="imageEntranceLoginInput_4">
              <img src="" class="img-responsive" id="imageEntranceLoginInput_5">
              <img src="" class="img-responsive" id="imageEntranceLoginInput_6">
              <img src="" class="img-responsive" id="imageEntranceLoginInput_7">
              <input name="imageEntranceLoginInput_1" class="imageEntranceLoginInput_1" type="hidden" value="">
              <input name="imageEntranceLoginInput_2" class="imageEntranceLoginInput_2" type="hidden" value="">
              <input name="imageEntranceLoginInput_3" class="imageEntranceLoginInput_3" type="hidden" value="">
              <input name="imageEntranceLoginInput_4" class="imageEntranceLoginInput_4" type="hidden" value="">
              <input name="imageEntranceLoginInput_5" class="imageEntranceLoginInput_5" type="hidden" value="">
              <input name="imageEntranceLoginInput_6" class="imageEntranceLoginInput_6" type="hidden" value="">
              <input name="imageEntranceLoginInput_7" class="imageEntranceLoginInput_7" type="hidden" value="">
              <img src="/imagesDefault/delete_all.png" class="img-responsive delete_all" id="delete_all_images_login">
            </div>

<div class="settings_entrance" id="styleSettingsEntrance">
  <img src="" class="img-responsive" id="imageEntranceLogin_1">
  <img src="" class="img-responsive" id="imageEntranceLogin_2">
  <img src="" class="img-responsive" id="imageEntranceLogin_3">
  <img src="" class="img-responsive" id="imageEntranceLogin_4">
  <img src="" class="img-responsive" id="imageEntranceLogin_5">
  <img src="" class="img-responsive" id="imageEntranceLogin_6">
  <img src="" class="img-responsive" id="imageEntranceLogin_7">
</div>

  <h2>Password</h2>
<div class="settings_entrance_input" id="">
  <img src="" class="img-responsive" id="imageEntrancePasswordInput_1">
  <img src="" class="img-responsive" id="imageEntrancePasswordInput_2">
  <img src="" class="img-responsive" id="imageEntrancePasswordInput_3">
  <img src="" class="img-responsive" id="imageEntrancePasswordInput_4">
  <img src="" class="img-responsive" id="imageEntrancePasswordInput_5">
  <img src="" class="img-responsive" id="imageEntrancePasswordInput_6">
  <img src="" class="img-responsive" id="imageEntrancePasswordInput_7">
  <input name="imageEntrancePasswordInput_1" class="imageEntrancePasswordInput_1" type="hidden" value="">
  <input name="imageEntrancePasswordInput_2" class="imageEntrancePasswordInput_2" type="hidden" value="">
  <input name="imageEntrancePasswordInput_3" class="imageEntrancePasswordInput_3" type="hidden" value="">
  <input name="imageEntrancePasswordInput_4" class="imageEntrancePasswordInput_4" type="hidden" value="">
  <input name="imageEntrancePasswordInput_5" class="imageEntrancePasswordInput_5" type="hidden" value="">
  <input name="imageEntrancePasswordInput_6" class="imageEntrancePasswordInput_6" type="hidden" value="">
  <input name="imageEntrancePasswordInput_7" class="imageEntrancePasswordInput_7" type="hidden" value="">
  <img src="/imagesDefault/delete_all.png" class="img-responsive delete_all" id="delete_all_images_password">
</div>

<div class="settings_entrance" id="">
  <img src="" class="img-responsive" id="imageEntrancePassword_1">
  <img src="" class="img-responsive" id="imageEntrancePassword_2">
  <img src="" class="img-responsive" id="imageEntrancePassword_3">
  <img src="" class="img-responsive" id="imageEntrancePassword_4">
  <img src="" class="img-responsive" id="imageEntrancePassword_5">
  <img src="" class="img-responsive" id="imageEntrancePassword_6">
  <img src="" class="img-responsive" id="imageEntrancePassword_7">
</div>

  <h2>Username</h2>
  <input name="usernameNewUser" type="text" class="input-personal-data" id="input-usernameNewUser" placeholder="Name" required>

  <h2>Age</h2>
  <input name="ageNewUser" type="text" class="input-personal-data" id="input-ageNewUser" placeholder="Age" required pattern="^[ 0-9]+$">

  <h2>Gender</h2>
  <SELECT name="genderNewUser" type="text" class="input-personal-data" id="input-genderNewUser" required>
        <OPTION>Male</OPTION>
        <OPTION>Female</OPTION>
        <OPTION>Non-binary</OPTION>
        <OPTION>Not-applicable</OPTION>
        <OPTION>I prefer not say</OPTION>
  </SELECT>

   <button type="submit" class="add-new-student" data-loading-text="Adding..."id="addNewUser">Add new student</button>
   <span class="help-block error"></span>
 </form>

        </section>
    </div>
  <!-- RIGHT END -->

    </div>

    <footer>
        <h3>Footer</h3>
        <p>Something.</p>
    </footer>


<script>
// Клиентский код //
// Человек вводит логин, email,
$(document.forms['cabinet_addNewUser']).on('submit', function() {
var form = $(this);
$('.error', form).html('');
$(":submit", form).button("loading");
// Этот логин, email, пароль отправляются на сервер
$.ajax({
  url: "/addNewUser", // роут: require('./registration').post
  method: "POST",
  data: form.serialize(),
  complete: function() {
    $(":submit", form).button("reset");
  },
  statusCode: {
    // если ответ сервера 200 - перенаправляем человека в личный кабинет(успешно создали нового пользователя)
    200: function() {
      //form.html("Student Added").addClass('alert-success');
      location.reload();
    },
    // если 403 - высвечивается ошибка(уже есть такой пользователь)
    403: function(jqXHR) {
      var error = JSON.parse(jqXHR.responseText);
      $('.error', form).html(error.message);
    }
  }
});
return false;
// location.reload();
});
</script>

<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDivSiqkv7QoDAe8qiY1QevU5N4vQ7aHZw",
    authDomain: "profpref-c5ce0.firebaseapp.com",
    databaseURL: "https://profpref-c5ce0.firebaseio.com",
    projectId: "profpref-c5ce0",
    storageBucket: "profpref-c5ce0.appspot.com",
    messagingSenderId: "664101035809"
  };
  firebase.initializeApp(config);

  // Получаем доступ к Хранилищу
  var storage = firebase.app().storage("profpref-c5ce0.appspot.com");

  //Web (JavaScript)
  var storageRef = firebase.storage().ref();


  // Подкгружаем из хранилища набор дефолтных каритнок для составления логина и пароля
   var url_1= storage.ref("entrance/1.png");
   var url_2 = storage.ref("entrance/2.png");
   var url_3 = storage.ref("entrance/3.png");
   var url_4= storage.ref("entrance/4.png");
   var url_5 = storage.ref("entrance/5.png");
   var url_6 = storage.ref("entrance/6.png");
   var url_7 = storage.ref("entrance/7.png");
// function getNumberHref(url) {
//   var str = url;
//   var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
//   var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд
//
//   return strNumber;
// }

  // Подгруз логина НАЧАЛО
  url_1.getDownloadURL().then(function(url) {

    // Сделать функцию бы
    var str = url;
    var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
    var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

    $("#imageEntranceLogin_1").attr('src', url); // Для отображения в верхней части

    $("#imageEntranceLogin_1").bind("click", function() { // клик по нижней части
      if($("#imageEntranceLoginInput_1").attr("src") == "") {
          $("#imageEntranceLoginInput_1").attr("src", url); // кладем в верхнюю изображение
          $(".imageEntranceLoginInput_1").val(strNumber); // номер фотки для вставки в БД
          //console.log (imageEntranceLoginInput_1.src + " imageEntranceLoginInput_1");

        } else if ($("#imageEntranceLoginInput_2").attr("src") == ""){
            $("#imageEntranceLoginInput_2").attr("src", url);
             $(".imageEntranceLoginInput_2").val(strNumber);
        }
        else if ($("#imageEntranceLoginInput_3").attr("src") == ""){
           $("#imageEntranceLoginInput_3").attr("src", url);
             $(".imageEntranceLoginInput_3").val(strNumber);
       }
       else if ($("#imageEntranceLoginInput_4").attr("src") == ""){
          $("#imageEntranceLoginInput_4").attr("src", url);
            $(".imageEntranceLoginInput_4").val(strNumber);
      }
      else if ($("#imageEntranceLoginInput_5").attr("src") == ""){
         $("#imageEntranceLoginInput_5").attr("src", url);
           $(".imageEntranceLoginInput_5").val(strNumber);
     }
     else if ($("#imageEntranceLoginInput_6").attr("src") == ""){
        $("#imageEntranceLoginInput_6").attr("src", url);
          $(".imageEntranceLoginInput_6").val(strNumber);
    }
    else if ($("#imageEntranceLoginInput_7").attr("src") == ""){
       $("#imageEntranceLoginInput_7").attr("src", url);
         $(".imageEntranceLoginInput_7").val(strNumber);

   }
    });
  });

  url_2.getDownloadURL().then(function(url) {

    // Сделать функцию бы
    var str = url;
    var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
    var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

    $("#imageEntranceLogin_2").attr('src', url);

    $("#imageEntranceLogin_2").bind("click", function() {
      if($("#imageEntranceLoginInput_1").attr("src") == "") {
          $("#imageEntranceLoginInput_1").attr("src", url);
          $(".imageEntranceLoginInput_1").val(strNumber);
        } else if ($("#imageEntranceLoginInput_2").attr("src") == ""){
            $("#imageEntranceLoginInput_2").attr("src", url);
            $(".imageEntranceLoginInput_2").val(strNumber);
        }
        else if ($("#imageEntranceLoginInput_3").attr("src") == ""){
           $("#imageEntranceLoginInput_3").attr("src", url);
           $(".imageEntranceLoginInput_3").val(strNumber);
       }
       else if ($("#imageEntranceLoginInput_4").attr("src") == ""){
          $("#imageEntranceLoginInput_4").attr("src", url);
          $(".imageEntranceLoginInput_4").val(strNumber);
      }
      else if ($("#imageEntranceLoginInput_5").attr("src") == ""){
         $("#imageEntranceLoginInput_5").attr("src", url);
         $(".imageEntranceLoginInput_5").val(strNumber);
     }
     else if ($("#imageEntranceLoginInput_6").attr("src") == ""){
        $("#imageEntranceLoginInput_6").attr("src", url);
        $(".imageEntranceLoginInput_6").val(strNumber);
    }
    else if ($("#imageEntranceLoginInput_7").attr("src") == ""){
       $("#imageEntranceLoginInput_7").attr("src", url);
       $(".imageEntranceLoginInput_7").val(strNumber);
   }
    });
  });

  url_3.getDownloadURL().then(function(url) {

    // Сделать функцию бы
    var str = url;
    var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
    var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

    $("#imageEntranceLogin_3").attr('src', url);

    $("#imageEntranceLogin_3").bind("click", function() {
      if($("#imageEntranceLoginInput_1").attr("src") == "") {
          $("#imageEntranceLoginInput_1").attr("src", url);
          $(".imageEntranceLoginInput_1").val(strNumber);
        } else if ($("#imageEntranceLoginInput_2").attr("src") == ""){
            $("#imageEntranceLoginInput_2").attr("src", url);
            $(".imageEntranceLoginInput_2").val(strNumber);
        } else if ($("#imageEntranceLoginInput_3").attr("src") == ""){
            $("#imageEntranceLoginInput_3").attr("src", url);
            $(".imageEntranceLoginInput_3").val(strNumber);
        }
        else if ($("#imageEntranceLoginInput_4").attr("src") == ""){
           $("#imageEntranceLoginInput_4").attr("src", url);
           $(".imageEntranceLoginInput_4").val(strNumber);
       }
       else if ($("#imageEntranceLoginInput_5").attr("src") == ""){
          $("#imageEntranceLoginInput_5").attr("src", url);
          $(".imageEntranceLoginInput_5").val(strNumber);
      }
      else if ($("#imageEntranceLoginInput_6").attr("src") == ""){
         $("#imageEntranceLoginInput_6").attr("src", url);
         $(".imageEntranceLoginInput_6").val(strNumber);
     }
     else if ($("#imageEntranceLoginInput_7").attr("src") == ""){
        $("#imageEntranceLoginInput_7").attr("src", url);
        $(".imageEntranceLoginInput_7").val(strNumber);
    }
    });
  });

  url_4.getDownloadURL().then(function(url) {

    // Сделать функцию бы
    var str = url;
    var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
    var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

    $("#imageEntranceLogin_4").attr('src', url);

    $("#imageEntranceLogin_4").bind("click", function() {
      if($("#imageEntranceLoginInput_1").attr("src") == "") {
          $("#imageEntranceLoginInput_1").attr("src", url);
          $(".imageEntranceLoginInput_1").val(strNumber);
        } else if ($("#imageEntranceLoginInput_2").attr("src") == ""){
            $("#imageEntranceLoginInput_2").attr("src", url);
            $(".imageEntranceLoginInput_2").val(strNumber);
        } else if ($("#imageEntranceLoginInput_3").attr("src") == ""){
            $("#imageEntranceLoginInput_3").attr("src", url);
            $(".imageEntranceLoginInput_3").val(strNumber);
        }
        else if ($("#imageEntranceLoginInput_4").attr("src") == ""){
           $("#imageEntranceLoginInput_4").attr("src", url);
           $(".imageEntranceLoginInput_4").val(strNumber);
       }
       else if ($("#imageEntranceLoginInput_5").attr("src") == ""){
          $("#imageEntranceLoginInput_5").attr("src", url);
          $(".imageEntranceLoginInput_5").val(strNumber);
      }
      else if ($("#imageEntranceLoginInput_6").attr("src") == ""){
         $("#imageEntranceLoginInput_6").attr("src", url);
         $(".imageEntranceLoginInput_6").val(strNumber);
     }
     else if ($("#imageEntranceLoginInput_7").attr("src") == ""){
        $("#imageEntranceLoginInput_7").attr("src", url);
        $(".imageEntranceLoginInput_7").val(strNumber);
    }
    });
  });

  url_5.getDownloadURL().then(function(url) {

    // Сделать функцию бы
    var str = url;
    var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
    var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

    $("#imageEntranceLogin_5").attr('src', url);

    $("#imageEntranceLogin_5").bind("click", function() {
      if($("#imageEntranceLoginInput_1").attr("src") == "") {
          $("#imageEntranceLoginInput_1").attr("src", url);
          $(".imageEntranceLoginInput_1").val(strNumber);
        } else if ($("#imageEntranceLoginInput_2").attr("src") == ""){
            $("#imageEntranceLoginInput_2").attr("src", url);
            $(".imageEntranceLoginInput_2").val(strNumber);
        } else if ($("#imageEntranceLoginInput_3").attr("src") == ""){
            $("#imageEntranceLoginInput_3").attr("src", url);
            $(".imageEntranceLoginInput_3").val(strNumber);
        }
        else if ($("#imageEntranceLoginInput_4").attr("src") == ""){
           $("#imageEntranceLoginInput_4").attr("src", url);
           $(".imageEntranceLoginInput_4").val(strNumber);
       }
       else if ($("#imageEntranceLoginInput_5").attr("src") == ""){
          $("#imageEntranceLoginInput_5").attr("src", url);
          $(".imageEntranceLoginInput_5").val(strNumber);
      }
      else if ($("#imageEntranceLoginInput_6").attr("src") == ""){
         $("#imageEntranceLoginInput_6").attr("src", url);
         $(".imageEntranceLoginInput_6").val(strNumber);
     }
     else if ($("#imageEntranceLoginInput_7").attr("src") == ""){
        $("#imageEntranceLoginInput_7").attr("src", url);
        $(".imageEntranceLoginInput_7").val(strNumber);
    }
    });
  });

  url_6.getDownloadURL().then(function(url) {

    // Сделать функцию бы
    var str = url;
    var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
    var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

    $("#imageEntranceLogin_6").attr('src', url);

    $("#imageEntranceLogin_6").bind("click", function() {
      if($("#imageEntranceLoginInput_1").attr("src") == "") {
          $("#imageEntranceLoginInput_1").attr("src", url);
          $(".imageEntranceLoginInput_1").val(strNumber);
        } else if ($("#imageEntranceLoginInput_2").attr("src") == ""){
            $("#imageEntranceLoginInput_2").attr("src", url);
            $(".imageEntranceLoginInput_2").val(strNumber);
        } else if ($("#imageEntranceLoginInput_3").attr("src") == ""){
            $("#imageEntranceLoginInput_3").attr("src", url);
            $(".imageEntranceLoginInput_3").val(strNumber);
        }
        else if ($("#imageEntranceLoginInput_4").attr("src") == ""){
           $("#imageEntranceLoginInput_4").attr("src", url);
           $(".imageEntranceLoginInput_4").val(strNumber);
       }
       else if ($("#imageEntranceLoginInput_5").attr("src") == ""){
          $("#imageEntranceLoginInput_5").attr("src", url);
          $(".imageEntranceLoginInput_5").val(strNumber);
      }
      else if ($("#imageEntranceLoginInput_6").attr("src") == ""){
         $("#imageEntranceLoginInput_6").attr("src", url);
         $(".imageEntranceLoginInput_6").val(strNumber);
     }
     else if ($("#imageEntranceLoginInput_7").attr("src") == ""){
        $("#imageEntranceLoginInput_7").attr("src", url);
        $(".imageEntranceLoginInput_7").val(strNumber);
    }
    });
  });

  url_7.getDownloadURL().then(function(url) {

    // Сделать функцию бы
    var str = url;
    var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
    var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

    $("#imageEntranceLogin_7").attr('src', url);

    $("#imageEntranceLogin_7").bind("click", function() {
      if($("#imageEntranceLoginInput_1").attr("src") == "") {
          $("#imageEntranceLoginInput_1").attr("src", url);
          $(".imageEntranceLoginInput_1").val(strNumber);
        } else if ($("#imageEntranceLoginInput_2").attr("src") == ""){
            $("#imageEntranceLoginInput_2").attr("src", url);
            $(".imageEntranceLoginInput_2").val(strNumber);
        } else if ($("#imageEntranceLoginInput_3").attr("src") == ""){
            $("#imageEntranceLoginInput_3").attr("src", url);
            $(".imageEntranceLoginInput_3").val(strNumber);
        }
        else if ($("#imageEntranceLoginInput_4").attr("src") == ""){
           $("#imageEntranceLoginInput_4").attr("src", url);
           $(".imageEntranceLoginInput_4").val(strNumber);
       }
       else if ($("#imageEntranceLoginInput_5").attr("src") == ""){
          $("#imageEntranceLoginInput_5").attr("src", url);
          $(".imageEntranceLoginInput_5").val(strNumber);
      }
      else if ($("#imageEntranceLoginInput_6").attr("src") == ""){
         $("#imageEntranceLoginInput_6").attr("src", url);
         $(".imageEntranceLoginInput_6").val(strNumber);
     }
     else if ($("#imageEntranceLoginInput_7").attr("src") == ""){
        $("#imageEntranceLoginInput_7").attr("src", url);
        $(".imageEntranceLoginInput_7").val(strNumber);
    }
    });
  });
  // Подгруз логина КОНЕЦ

  // Подгруз пароля НАЧАЛО
   url_1.getDownloadURL().then(function(url) {

     // Сделать функцию бы
     var str = url;
     var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
     var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

     $("#imageEntrancePassword_1").attr('src', url);

     $("#imageEntrancePassword_1").bind("click", function() {
       if($("#imageEntrancePasswordInput_1").attr("src") == "") {
           $("#imageEntrancePasswordInput_1").attr("src", url);
           $(".imageEntrancePasswordInput_1").val(strNumber);
           //console.log (imageEntranceLoginInput_1.src + " imageEntranceLoginInput_1");
           console.log (url + " url");
         } else if ($("#imageEntrancePasswordInput_2").attr("src") == ""){
             $("#imageEntrancePasswordInput_2").attr("src", url);
              $(".imageEntrancePasswordInput_2").val(strNumber);
         }
         else if ($("#imageEntrancePasswordInput_3").attr("src") == ""){
            $("#imageEntrancePasswordInput_3").attr("src", url);
              $(".imageEntrancePasswordInput_3").val(strNumber);
        }
        else if ($("#imageEntrancePasswordInput_4").attr("src") == ""){
           $("#imageEntrancePasswordInput_4").attr("src", url);
             $(".imageEntrancePasswordInput_4").val(strNumber);
       }
       else if ($("#imageEntrancePasswordInput_5").attr("src") == ""){
          $("#imageEntrancePasswordInput_5").attr("src", url);
            $(".imageEntrancePasswordInput_5").val(strNumber);
      }
      else if ($("#imageEntrancePasswordInput_6").attr("src") == ""){
         $("#imageEntrancePasswordInput_6").attr("src", url);
           $(".imageEntrancePasswordInput_6").val(strNumber);
     }
     else if ($("#imageEntrancePasswordInput_7").attr("src") == ""){
        $("#imageEntrancePasswordInput_7").attr("src", url);
          $(".imageEntrancePasswordInput_7").val(strNumber);
    }
     });
   });

   url_2.getDownloadURL().then(function(url) {

     // Сделать функцию бы
     var str = url;
     var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
     var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

     $("#imageEntrancePassword_2").attr('src', url);

     $("#imageEntrancePassword_2").bind("click", function() {
       if($("#imageEntrancePasswordInput_1").attr("src") == "") {
           $("#imageEntrancePasswordInput_1").attr("src", url);
           $(".imageEntrancePasswordInput_1").val(strNumber);
           //console.log (imageEntranceLoginInput_1.src + " imageEntranceLoginInput_1");
           console.log (url + " url");
         } else if ($("#imageEntrancePasswordInput_2").attr("src") == ""){
             $("#imageEntrancePasswordInput_2").attr("src", url);
              $(".imageEntrancePasswordInput_2").val(strNumber);
         }
         else if ($("#imageEntrancePasswordInput_3").attr("src") == ""){
            $("#imageEntrancePasswordInput_3").attr("src", url);
              $(".imageEntrancePasswordInput_3").val(strNumber);
        }
        else if ($("#imageEntrancePasswordInput_4").attr("src") == ""){
           $("#imageEntrancePasswordInput_4").attr("src", url);
             $(".imageEntrancePasswordInput_4").val(strNumber);
       }
       else if ($("#imageEntrancePasswordInput_5").attr("src") == ""){
          $("#imageEntrancePasswordInput_5").attr("src", url);
            $(".imageEntrancePasswordInput_5").val(strNumber);
      }
      else if ($("#imageEntrancePasswordInput_6").attr("src") == ""){
         $("#imageEntrancePasswordInput_6").attr("src", url);
           $(".imageEntrancePasswordInput_6").val(strNumber);
     }
     else if ($("#imageEntrancePasswordInput_7").attr("src") == ""){
        $("#imageEntrancePasswordInput_7").attr("src", url);
          $(".imageEntrancePasswordInput_7").val(strNumber);
    }
     });
   });

   url_3.getDownloadURL().then(function(url) {

     // Сделать функцию бы
     var str = url;
     var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
     var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

     $("#imageEntrancePassword_3").attr('src', url);

     $("#imageEntrancePassword_3").bind("click", function() {
       if($("#imageEntrancePasswordInput_1").attr("src") == "") {
           $("#imageEntrancePasswordInput_1").attr("src", url);
           $(".imageEntrancePasswordInput_1").val(strNumber);
           //console.log (imageEntranceLoginInput_1.src + " imageEntranceLoginInput_1");
           console.log (url + " url");
         } else if ($("#imageEntrancePasswordInput_2").attr("src") == ""){
             $("#imageEntrancePasswordInput_2").attr("src", url);
              $(".imageEntrancePasswordInput_2").val(strNumber);
         }
         else if ($("#imageEntrancePasswordInput_3").attr("src") == ""){
            $("#imageEntrancePasswordInput_3").attr("src", url);
              $(".imageEntrancePasswordInput_3").val(strNumber);
        }
        else if ($("#imageEntrancePasswordInput_4").attr("src") == ""){
           $("#imageEntrancePasswordInput_4").attr("src", url);
             $(".imageEntrancePasswordInput_4").val(strNumber);
       }
       else if ($("#imageEntrancePasswordInput_5").attr("src") == ""){
          $("#imageEntrancePasswordInput_5").attr("src", url);
            $(".imageEntrancePasswordInput_5").val(strNumber);
      }
      else if ($("#imageEntrancePasswordInput_6").attr("src") == ""){
         $("#imageEntrancePasswordInput_6").attr("src", url);
           $(".imageEntrancePasswordInput_6").val(strNumber);
     }
     else if ($("#imageEntrancePasswordInput_7").attr("src") == ""){
        $("#imageEntrancePasswordInput_7").attr("src", url);
          $(".imageEntrancePasswordInput_7").val(strNumber);
    }
     });
   });

   url_4.getDownloadURL().then(function(url) {

     // Сделать функцию бы
     var str = url;
     var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
     var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

     $("#imageEntrancePassword_4").attr('src', url);

     $("#imageEntrancePassword_4").bind("click", function() {
       if($("#imageEntrancePasswordInput_1").attr("src") == "") {
           $("#imageEntrancePasswordInput_1").attr("src", url);
           $(".imageEntrancePasswordInput_1").val(strNumber);
           //console.log (imageEntranceLoginInput_1.src + " imageEntranceLoginInput_1");
           console.log (url + " url");
         } else if ($("#imageEntrancePasswordInput_2").attr("src") == ""){
             $("#imageEntrancePasswordInput_2").attr("src", url);
              $(".imageEntrancePasswordInput_2").val(strNumber);
         }
         else if ($("#imageEntrancePasswordInput_3").attr("src") == ""){
            $("#imageEntrancePasswordInput_3").attr("src", url);
              $(".imageEntrancePasswordInput_3").val(strNumber);
        }
        else if ($("#imageEntrancePasswordInput_4").attr("src") == ""){
           $("#imageEntrancePasswordInput_4").attr("src", url);
             $(".imageEntrancePasswordInput_4").val(strNumber);
       }
       else if ($("#imageEntrancePasswordInput_5").attr("src") == ""){
          $("#imageEntrancePasswordInput_5").attr("src", url);
            $(".imageEntrancePasswordInput_5").val(strNumber);
      }
      else if ($("#imageEntrancePasswordInput_6").attr("src") == ""){
         $("#imageEntrancePasswordInput_6").attr("src", url);
           $(".imageEntrancePasswordInput_6").val(strNumber);
     }
     else if ($("#imageEntrancePasswordInput_7").attr("src") == ""){
        $("#imageEntrancePasswordInput_7").attr("src", url);
          $(".imageEntrancePasswordInput_7").val(strNumber);
    }
     });
   });

   url_5.getDownloadURL().then(function(url) {

     // Сделать функцию бы
     var str = url;
     var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
     var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

     $("#imageEntrancePassword_5").attr('src', url);

     $("#imageEntrancePassword_5").bind("click", function() {
       if($("#imageEntrancePasswordInput_1").attr("src") == "") {
           $("#imageEntrancePasswordInput_1").attr("src", url);
           $(".imageEntrancePasswordInput_1").val(strNumber);
           //console.log (imageEntranceLoginInput_1.src + " imageEntranceLoginInput_1");
           console.log (url + " url");
         } else if ($("#imageEntrancePasswordInput_2").attr("src") == ""){
             $("#imageEntrancePasswordInput_2").attr("src", url);
              $(".imageEntrancePasswordInput_2").val(strNumber);
         }
         else if ($("#imageEntrancePasswordInput_3").attr("src") == ""){
            $("#imageEntrancePasswordInput_3").attr("src", url);
              $(".imageEntrancePasswordInput_3").val(strNumber);
        }
        else if ($("#imageEntrancePasswordInput_4").attr("src") == ""){
           $("#imageEntrancePasswordInput_4").attr("src", url);
             $(".imageEntrancePasswordInput_4").val(strNumber);
       }
       else if ($("#imageEntrancePasswordInput_5").attr("src") == ""){
          $("#imageEntrancePasswordInput_5").attr("src", url);
            $(".imageEntrancePasswordInput_5").val(strNumber);
      }
      else if ($("#imageEntrancePasswordInput_6").attr("src") == ""){
         $("#imageEntrancePasswordInput_6").attr("src", url);
           $(".imageEntrancePasswordInput_6").val(strNumber);
     }
     else if ($("#imageEntrancePasswordInput_7").attr("src") == ""){
        $("#imageEntrancePasswordInput_7").attr("src", url);
          $(".imageEntrancePasswordInput_7").val(strNumber);
    }
     });
   });

   url_6.getDownloadURL().then(function(url) {

     // Сделать функцию бы
     var str = url;
     var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
     var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

     $("#imageEntrancePassword_6").attr('src', url);

     $("#imageEntrancePassword_6").bind("click", function() {
       if($("#imageEntrancePasswordInput_1").attr("src") == "") {
           $("#imageEntrancePasswordInput_1").attr("src", url);
           $(".imageEntrancePasswordInput_1").val(strNumber);
           //console.log (imageEntranceLoginInput_1.src + " imageEntranceLoginInput_1");
           console.log (url + " url");
         } else if ($("#imageEntrancePasswordInput_2").attr("src") == ""){
             $("#imageEntrancePasswordInput_2").attr("src", url);
              $(".imageEntrancePasswordInput_2").val(strNumber);
         }
         else if ($("#imageEntrancePasswordInput_3").attr("src") == ""){
            $("#imageEntrancePasswordInput_3").attr("src", url);
              $(".imageEntrancePasswordInput_3").val(strNumber);
        }
        else if ($("#imageEntrancePasswordInput_4").attr("src") == ""){
           $("#imageEntrancePasswordInput_4").attr("src", url);
             $(".imageEntrancePasswordInput_4").val(strNumber);
       }
       else if ($("#imageEntrancePasswordInput_5").attr("src") == ""){
          $("#imageEntrancePasswordInput_5").attr("src", url);
            $(".imageEntrancePasswordInput_5").val(strNumber);
      }
      else if ($("#imageEntrancePasswordInput_6").attr("src") == ""){
         $("#imageEntrancePasswordInput_6").attr("src", url);
           $(".imageEntrancePasswordInput_6").val(strNumber);
     }
     else if ($("#imageEntrancePasswordInput_7").attr("src") == ""){
        $("#imageEntrancePasswordInput_7").attr("src", url);
          $(".imageEntrancePasswordInput_7").val(strNumber);
    }
     });
   });

   url_7.getDownloadURL().then(function(url) {

     // Сделать функцию бы
     var str = url;
     var strNumberPng = str.split('?alt=media')[0]; // путь до 1.png
     var strNumber = str[strNumberPng.length - 5]; // саму цифру кладем в Бд

     $("#imageEntrancePassword_7").attr('src', url);

     $("#imageEntrancePassword_7").bind("click", function() {
       if($("#imageEntrancePasswordInput_1").attr("src") == "") {
           $("#imageEntrancePasswordInput_1").attr("src", url);
           $(".imageEntrancePasswordInput_1").val(strNumber);
           //console.log (imageEntranceLoginInput_1.src + " imageEntranceLoginInput_1");
           console.log (url + " url");
         } else if ($("#imageEntrancePasswordInput_2").attr("src") == ""){
             $("#imageEntrancePasswordInput_2").attr("src", url);
              $(".imageEntrancePasswordInput_2").val(strNumber);
         }
         else if ($("#imageEntrancePasswordInput_3").attr("src") == ""){
            $("#imageEntrancePasswordInput_3").attr("src", url);
              $(".imageEntrancePasswordInput_3").val(strNumber);
        }
        else if ($("#imageEntrancePasswordInput_4").attr("src") == ""){
           $("#imageEntrancePasswordInput_4").attr("src", url);
             $(".imageEntrancePasswordInput_4").val(strNumber);
       }
       else if ($("#imageEntrancePasswordInput_5").attr("src") == ""){
          $("#imageEntrancePasswordInput_5").attr("src", url);
            $(".imageEntrancePasswordInput_5").val(strNumber);
      }
      else if ($("#imageEntrancePasswordInput_6").attr("src") == ""){
         $("#imageEntrancePasswordInput_6").attr("src", url);
           $(".imageEntrancePasswordInput_6").val(strNumber);
     }
     else if ($("#imageEntrancePasswordInput_7").attr("src") == ""){
        $("#imageEntrancePasswordInput_7").attr("src", url);
          $(".imageEntrancePasswordInput_7").val(strNumber);
    }
     });
   });
// Подгруз пароля КОНЕЦ


// УДАЛЕНИЕ ПИКТОГРАФИЧЕСКИХ ДАННЫХ НАЧАЛО

  // Удаление поэлементно в логине
   $("#imageEntranceLoginInput_1").bind("click", function() {
         $("#imageEntranceLoginInput_1").attr("src", "");
   });
   $("#imageEntranceLoginInput_2").bind("click", function() {
         $("#imageEntranceLoginInput_2").attr("src", "");
   });
   $("#imageEntranceLoginInput_3").bind("click", function() {
         $("#imageEntranceLoginInput_3").attr("src", "");
   });
   $("#imageEntranceLoginInput_4").bind("click", function() {
         $("#imageEntranceLoginInput_4").attr("src", "");
   });
   $("#imageEntranceLoginInput_5").bind("click", function() {
         $("#imageEntranceLoginInput_5").attr("src", "");
   });
   $("#imageEntranceLoginInput_6").bind("click", function() {
         $("#imageEntranceLoginInput_6").attr("src", "");
   });
   $("#imageEntranceLoginInput_7").bind("click", function() {
         $("#imageEntranceLoginInput_7").attr("src", "");
   });

  // Удаление всех элементов в логине
   $("#delete_all_images_login").bind("click", function() {
      $("#imageEntranceLoginInput_1").attr("src", "");
      $("#imageEntranceLoginInput_2").attr("src", "");
      $("#imageEntranceLoginInput_3").attr("src", "");
      $("#imageEntranceLoginInput_4").attr("src", "");
      $("#imageEntranceLoginInput_5").attr("src", "");
      $("#imageEntranceLoginInput_6").attr("src", "");
      $("#imageEntranceLoginInput_7").attr("src", "");
   });


   // Удаление поэлементно в пароле
    $("#imageEntrancePasswordInput_1").bind("click", function() {
          $("#imageEntrancePasswordInput_1").attr("src", "");
    });
    $("#imageEntrancePasswordInput_2").bind("click", function() {
          $("#imageEntrancePasswordInput_2").attr("src", "");
    });
    $("#imageEntrancePasswordInput_3").bind("click", function() {
          $("#imageEntrancePasswordInput_3").attr("src", "");
    });
    $("#imageEntrancePasswordInput_4").bind("click", function() {
          $("#imageEntrancePasswordInput_4").attr("src", "");
    });
    $("#imageEntrancePasswordInput_5").bind("click", function() {
          $("#imageEntrancePasswordInput_5").attr("src", "");
    });
    $("#imageEntrancePasswordInput_6").bind("click", function() {
          $("#imageEntrancePasswordInput_6").attr("src", "");
    });
    $("#imageEntrancePasswordInput_7").bind("click", function() {
          $("#imageEntrancePasswordInput_7").attr("src", "");
    });

   // Удаление всех элементов в пароле
    $("#delete_all_images_password").bind("click", function() {
       $("#imageEntrancePasswordInput_1").attr("src", "");
       $("#imageEntrancePasswordInput_2").attr("src", "");
       $("#imageEntrancePasswordInput_3").attr("src", "");
       $("#imageEntrancePasswordInput_4").attr("src", "");
       $("#imageEntrancePasswordInput_5").attr("src", "");
       $("#imageEntrancePasswordInput_6").attr("src", "");
       $("#imageEntrancePasswordInput_7").attr("src", "");
    });

// УДАЛЕНИЕ ПИКТОГРАФИЧЕСКИХ ДАННЫХ КОНЕЦ
</script>


<script>
// Загрузка файлов
function loadFile(input) {

        //Step 1 : Defining element to show the progress
        var elem = document.getElementById("myBar");
        var filetoUpload=input.files[0];


        //Step 2 : Initializing the reference of database with the filename из селекта выбор номера
        var storageRef = firebase.storage().ref("entrance/" + $("#input-updateImage").val() + ".png");
        //Step 3 : Uploading file
         var task = storageRef.put(filetoUpload);

        //Step 4 : sata_changed Event
         // state_changed events occures when file is getting uploaded
         //(Note : when we want to show the progress what's the uploading status that time we will use this function.)
         task.on('state_changed',
            function progress(snapshot){
                var percentage = snapshot.bytesTransferred / snapshot.totalBytes * 100;
                //uploader.value = percentage;
                 elem.style.width = parseInt(percentage) + '%';
                 elem.innerHTML=parseInt(percentage)+'%';
            },
            function error(err){

            },
            function complete(){
                var downloadURL = task.snapshot.downloadURL;
            }
        );
}
</script>
