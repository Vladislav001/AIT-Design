<link rel="stylesheet" href="/css/styleResultTest.css">
<% layout('layout/page') -%>
<% block('title') -%>

<h1><b>AIT</b></h1>

  <form class="form-updateStudent" name="cabinet_updateStudent">
  <div class="informationAboutStudent">
    <table cellspacing="0">
      <tr>
          <th>Name</th>
          <th>Gender</th>
          <th>Age</th>
          <th>Login</th>
          <th>Password</th>
          <th>Current test</th>
          <th>Test settings</th>
      </tr>
      <tr>
          <td><input name="updateNameStudent" type="text" value="<%=nameStudent%>" class="form-control" id="input-updateNameStudent" placeholder="Name" required></td>
          <td><SELECT name="updateGenderStudent" type="text" class="form-control" id="input-genderNewUser" required>
            <% switch (genderStudent) {
                case "Male": %>
                  <OPTION><%=genderStudent%></OPTION>
                  <OPTION>Female</OPTION>
                   <% break; %><%
                  case "Female": %>
                    <OPTION><%=genderStudent%></OPTION>
                    <OPTION>Male</OPTION>
                     <% break; %> <% } %>
          </SELECT></td>
          <td><input name="updateAgeStudent" type="text" value="<%=ageStudent%>" class="form-control" id="input-updateAgeStudent" placeholder="Age" required pattern="^[ 0-9]+$"></td>
          <td><input name="updateLoginStudent" type="text" value="<%=loginStudent%>" class="form-control" id="input-updateLoginStudent" placeholder="Login" required></td>
          <td><input name="updatePasswordStudent" type="text" value="<%=passwordStudent%>" class="form-control" id="input-updatePasswordStudent" placeholder="Password" required pattern="^[a-zA-Z0-9]+${4,}"></td>
          <td><SELECT name="updateCurrentTest" type="text" class="form-control" id="input-currentTest" required>
            <% switch (currentTest) {
                case "1": %>
                  <OPTION><%=currentTest%></OPTION>
                  <OPTION>2</OPTION>
                   <% break; %><%
                  case "2": %>
                    <OPTION><%=currentTest%></OPTION>
                    <OPTION>1</OPTION>
                     <% break; %> <% } %>
          </SELECT></td>
          <td><a href="<%=link%>">Start</a></td>
          <td><button type="submit" class="btn btn-primary updateStudent" data-loading-text="Sending..."id="updateStudent">Update student</button></td>
      </tr>
  </table>
  </div>
</form>

<form class="form-deleteStudent" name="cabinet_deleteStudent">
<button type="submit" class="btn btn-primary deleteStudent" data-loading-text="Sending..."id="deleteStudent">Delete student</button>
</form>


  <h2><b>Test results</b></h2>
  <form class="form-resultsTest">
  <div class="informationAboutStudentTest">
  <table cellspacing="0">
    <tr>
        <th>№</th>
        <th>Category</th>
        <th>Like</th>
        <th>Dislike</th>
        <th>Not answer</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Food</td>
        <td></td>
        <td>Yes</td>
        <td></td>
    </tr>
    <td><em>Questions: </em></td>
    <td><em>Categories: </em></td>
    <td><em>Likes: </em></td>
    <td><em>Dislikes: </em></td>
    <td><em>Not answers: </em></td>
</table>
</div>

<div class="informationAboutAcceptCategory">
<table cellspacing="0">
  <tr>
      <th>№</th>
      <th>Category</th>
      <th>Accept</th>
  </tr>
  <tr>
      <td>1</td>
      <td>Food</td>
      <td>Yes</td>
  </tr>
</table>
</div>
</form>

<script>
// Клиентский код //
// Человек вводит логин, email,
$(document.forms['cabinet_updateStudent']).on('submit', function() {
var form = $(this);
$('.error', form).html('');
$(":submit", form).button("loading");
// Этот логин, email, пароль отправляются на сервер
$.ajax({
  url: "/result_test/id<%=id%>", // роут: require('./registration').post
  method: "POST",
  data: form.serialize(),
  complete: function() {
    $(":submit", form).button("reset");
  }
  // ,
  // statusCode: {
  //   // если ответ сервера 200 - перенаправляем человека в личный кабинет(успешно создали нового пользователя)
  //   200: function() {
  //     form.html("Вы успешно зарегестрировались").addClass('alert-success');
  //     window.location.href = "/personalArea";
  //   }
  //,
  //   // если 403 - высвечивается ошибка(уже есть такой пользователь)
  //   403: function(jqXHR) {
  //     var error = JSON.parse(jqXHR.responseText);
  //     $('.error', form).html(error.message);
  //   }
  // }
});  //window.location.href = "/";
//return false;
location.reload();
});
</script>

<script>
// Клиентский код //
// Человек вводит логин, email,
$(document.forms['cabinet_deleteStudent']).on('submit', function() {
var form = $(this);
$('.error', form).html('');
$(":submit", form).button("loading");
// Этот логин, email, пароль отправляются на сервер
$.ajax({
  url: "/deleteStudent/id<%=id%>", // роут: require('./registration').post
  method: "POST",
  data: form.serialize(),
  complete: function() {
    $(":submit", form).button("reset");
  }
  // ,
  // statusCode: {
  //   // если ответ сервера 200 - перенаправляем человека в личный кабинет(успешно создали нового пользователя)
  //   200: function() {
  //     form.html("Вы успешно зарегестрировались").addClass('alert-success');
  //     window.location.href = "/personalArea";
  //   }
  //,
  //   // если 403 - высвечивается ошибка(уже есть такой пользователь)
  //   403: function(jqXHR) {
  //     var error = JSON.parse(jqXHR.responseText);
  //     $('.error', form).html(error.message);
  //   }
  // }
});  //window.location.href = "/";
//return false;
window.location.href = "/personalArea";
return false;
location.reload();
});
</script>
